$(document).ready(function(){window.App.DashBoard.bindEvents()}),App=function(App){function bindEvents(){$("#locationform-location").on("change",_getIndex),$("#location-form").on("submit",_getShares)}function _getIndex(event){var locId=$(this).val();$.ajax({url:"/?c=dashboard&a=indices",method:"POST",data:{loc:locId}}).done(_populateIndex).fail(_error)}function _populateIndex(resp){var indices=JSON.parse(resp);$("#locationform-index").empty(),indices.forEach(function(obj){$("#locationform-index").append('<option value="'+obj.id+'">'+obj.index+"</option>")})}function _error(){console.log("error"),$("#locationform-loader").removeClass("loading")}function _getShares(event){$("#locationform-loader").addClass("loading");var index_id=$("#locationform-index").val();$.ajax({url:"/?c=dashboard&a=shares",method:"POST",data:{index_id:index_id}}).done(_populateShares).fail(_error),event.preventDefault()}function _populateShares(res){try{var shares=JSON.parse(res)}catch(e){$("#locationform-loader").removeClass("loading")}var html="";$("#shares-tbl tbody tr").empty(),shares.forEach(function(obj){html+="<tr> \t\t\t<td>1</td><td>"+obj.name+"</td> \t\t\t<td>"+obj.symbol+"</td> \t\t\t<td>"+obj.price_initiated+"</td> \t\t\t<td>"+obj.recommendation+'</td> \t\t\t<td><a href="/share/view?id=25" title="View" aria-label="View" data-pjax="0"> \t\t\t\t<span class="glyphicon glyphicon-eye-open"></span></a> \t\t\t\t<a href="/share/update?id=25" title="Update" aria-label="Update" data-pjax="0"> \t\t\t\t<span class="glyphicon glyphicon-pencil"></span></a> \t\t\t\t<a href="/share/delete?id=25" title="Delete" aria-label="Delete" data-confirm="Are you sure you want to delete this item?" data-method="post" data-pjax="0"><span class="glyphicon glyphicon-trash"></span></a>\t\t\t</td>\t\t\t</tr>'}),$("#shares-tbl tr:last").after(html),$("#locationform-loader").removeClass("loading")}var DashBoard={};return DashBoard.bindEvents=bindEvents,App.DashBoard=DashBoard,App}(window.App||{});
//# sourceMappingURL=map/app.min.js.map
